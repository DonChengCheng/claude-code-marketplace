# 任务类型推断规则

## 任务类型标签

### 功能开发类
- `大系统`: 超过10个模块的系统级功能开发
- `小系统`: 10个模块以内的系统级功能开发
- `大模块`: 超过15个功能的模块级功能开发
- `小模块`: 15个功能以内的模块级功能开发
- `页面`: 单个页面级别的开发
- `操作`: 功能/逻辑相关操作

### Bug修复详细分类
- **系统级别**: `大系统`、`小系统`
- **模块级别**: `大模块`、`小模块`
- **功能级别**:
  - **页面类**: `列表页`、`详情页`
  - **操作类**: `新增`、`删除`、`编辑`、`复制`、`移动`、`筛选/搜索`、`排序`、`分享`

### 交互优化分类
使用功能级别分类: `操作`、`页面` 等

---

## 类型推断规则

根据任务描述关键词智能判断，**按优先级从高到低匹配**:

### 优先级1: 页面 类型 (UI/视觉相关)

**匹配关键词**:
- 显示相关: "显示"、"隐藏"、"展示"、"呈现"
- 样式相关: "样式"、"颜色"、"渐变"、"背景"、"字体"、"图标"
- 布局相关: "布局"、"排版"、"位置"、"对齐"、"间距"
- 视觉元素: "弹窗"、"弹层"、"对话框"、"导航栏"、"标签"、"卡片"、"资料卡"
- 文案内容: "文案"、"说明"、"规则"、"内容"、"FAQ"
- 层级问题: "z-index"、"层级"、"遮罩"
- 页面/界面: "页面"、"界面"、"UI"、"视图"
- 视觉效果: "动画"、"过渡"、"阴影"、"圆角"

**判断逻辑**: 如果任务涉及视觉呈现、用户界面、文案内容，优先归为 页面

### 优先级2: 操作 类型 (功能/逻辑相关)

**匹配关键词**:
- 功能开发: "功能"、"特性"、"能力"
- 接口对接: "接口"、"API"、"调用"、"请求"
- 逻辑处理: "逻辑"、"算法"、"计算"、"处理"
- 交互行为: "点击"、"滑动"、"拖拽"、"输入"
- 状态管理: "状态"、"缓存"、"存储"
- 调试优化: "调试"、"联调"、"对接"、"优化"(仅当不涉及UI时)
- 数据操作: "添加"、"删除"、"修改"、"更新"(仅当不涉及UI时)
- Bug修复: "修复"、"修正"、"解决"(仅当不涉及UI时)

**判断逻辑**: 如果任务涉及业务逻辑、数据处理、功能实现，且不涉及UI，归为 操作

### 优先级3: 小模块 类型
**匹配关键词**: "模块"、"组件"、"插件"、"工具类"、"管理"

### 优先级4: 大模块 类型
**匹配关键词**: "系统"、"平台"、"子系统"、"框架"(且范围较大)

### 优先级5: 小系统/大系统 类型
完整的功能系统或多系统集成

---

## 特殊规则

1. **混合任务优先选择 页面**
   - 如果任务同时包含功能和UI关键词，优先选 页面
   - 例: "优化上传功能的进度显示" → 页面 (因为涉及"显示")

2. **文案类任务归为 页面**
   - 所有涉及"文案"、"说明"、"规则"、"内容"的任务归为 页面
   - 例: "完善活动规则说明" → 页面

3. **样式/布局类任务归为 页面**
   - 所有涉及"样式"、"布局"、"显示"的任务归为 页面
   - 例: "优化标签样式" → 页面

4. **重构类任务看影响范围**
   - "重构"、"refactor" 根据影响范围判断
   - 如果只涉及代码结构，选 操作
   - 如果影响UI呈现，选 页面

---

## 任务分类规则 (用于总结)

- **新增功能开发**: 类型为 大系统、小系统、大模块、小模块、页面 且不包含"优化"、"修复"等关键词
- **交互优化**: 任务名称包含"优化"、"调整"、"改进"、"完善"等关键词
- **Bug修复**: 任务名称包含"修复"、"Bug"、"fix"、"解决问题"等关键词

---

## 功能模块标识

从 Git commit message 的 conventional commit 格式自动提取功能模块：

**提取规则**: `type(scope): message` → 【scope中文名】

| Commit scope | 模块标识 |
|--------------|----------|
| `shopping` | 【商城】 |
| `schedule` | 【日程】 |
| `chat` | 【聊天】 |
| `editor` | 【编辑器】 |
| `file` | 【文件】 |
| `user` | 【用户】 |
| 其他英文 | 【首字母大写英文】 |

**任务名称格式**:
- 表格中：`【模块】任务描述`
- 总结中：`[平台]【模块】任务描述`

---

## Conventional Commits 类型映射

### 类型与任务分类对应关系

| Commit Type | 任务分类 | 描述前缀 | 示例 |
|-------------|----------|----------|------|
| `fix` | Bug修复 | "修复" | 修复商品赠品图片无法正常显示的问题 |
| `feat` | 新增功能 | "实现" | 实现首页精选好物商品推荐模块 |
| `perf` | 交互优化 | "优化" | 优化订单详情页物流信息展示格式 |
| `refactor` | 交互优化 | "优化" | 优化商品详情页代码结构提升可维护性 |
| `style` | 交互优化 | "优化" | 优化精选好物模块的卡片布局样式 |
| `chore` | 交互优化 | 无前缀 | safe-html工具支持服务端环境 |
| `docs` | 交互优化 | 无前缀 | 更新API文档说明 |

---

## 任务描述规范

### 描述格式要求

**必须**使用具体明确的描述格式：
- Bug修复: `修复[具体问题]的问题`
- 新功能: `实现[具体功能]`
- 优化: `优化[具体内容]`

**禁止**使用总结性/合并性描述：
- ❌ `赠品图片显示、分类分页及VIP数量控制修复`
- ❌ `线下打款订单状态及手机号脱敏修复`
- ❌ `商品分享文案修复、精选好物实现、物流及卡券显示优化`

**正确**示例：
- ✅ `修复商品赠品图片无法正常显示的问题`
- ✅ `修复线下打款订单状态显示不正确的问题`
- ✅ `实现首页精选好物商品推荐模块`

---

## Issue拆分规则

### 识别多Issue提交

当单个提交包含多个issue编号时（如 `#64514, #64708`），**必须**拆分为独立任务。

### 拆分算法

```
输入: fix(shopping): 修复赠品图片和分类分页问题 #64514 #64708

步骤1: 提取issue编号 → [64514, 64708]
步骤2: 分析描述中的并列内容 → ["赠品图片", "分类分页"]
步骤3: 生成独立任务:
       - 【商城】修复赠品图片问题 (#64514) | 工时: 0.25
       - 【商城】修复分类分页问题 (#64708) | 工时: 0.25
```

### 工时分配

- 原提交工时 / issue数量
- 最小工时: 0.25小时
- 示例: 原1小时 / 3个issue = 每个0.33小时 → 四舍五入到0.25或0.5