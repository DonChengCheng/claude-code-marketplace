# 周报工作流程详细说明

本文档包含周报生成的详细工作流程，供需要深入了解实现细节时参考。

---

## 从日报汇总模式 (详细流程)

### 1. 查找本周日报文件

```javascript
使用 Glob 查找: "日报_*.md"
筛选出日期在本周范围内的文件
```

### 2. 读取并解析日报

- 提取任务信息（从表格中）
- 提取耗时、进度、AI百分比

### 3. 任务分类和汇总

| 分类 | 匹配规则 |
|------|----------|
| 新增功能开发 | 类型为 [系统]、[模块]、[页面] |
| 交互调整或优化 | 任务包含"优化"、"调整"、"改进" |
| Bug修复 | 任务包含"修复"、"Bug"、"fix" |

### 4. 数据去重和合并

- 合并跨天任务的工时
- 更新最终交付时间

### 5. 统计计算

```javascript
总工时 = sum(所有日报的"当天耗时")
AI辅助率 = average(所有任务的AI百分比)
完成任务数 = count(进度 == 100%)
```

### 6. 询问补充信息

- 工作概述
- 问题反馈
- 下周计划

---

## 交互式填写模式

使用 TodoWrite 逐步引导填写各部分:

1. 本周工作概述
2. 新增功能开发任务（9字段表格）
3. 交互优化任务（9字段表格）
4. Bug修复任务（9字段表格）
5. 关键进展（2-3个要点）
6. 问题反馈
7. 下周计划

---

## 从数据源导入模式

支持从目录或文件导入数据:
- Markdown 文件
- JSON 格式
- CSV 文件

---

## 空白模板模式

直接生成包含完整结构的空白周报。

---

## 周报输出格式

### 文件结构

```markdown
### **网页开发工程师 - 董成成周报 (YYYY/MM/DD - YYYY/MM/DD)**

## 一、本周工作总结

**工作概述:**
[概述内容]

### 新增功能开发
| 序号 | 任务名称 | 所属平台 | 起始时间 | 交付时间 | 预计耗时 | 实际耗时 | 任务状态 | 备注 |
|------|----------|----------|----------|----------|----------|----------|----------|------|

### 交互调整或优化
[9字段表格]

### Bug修复
[9字段表格]

## 二、关键进展
1. 要点1
2. 要点2

## 三、问题反馈
[问题内容或"本周工作进展顺利，暂无需要反馈的问题"]

## 四、下周计划
1. 计划1
2. 计划2

*总工时：XX小时 | AI辅助率：XX% | 完成任务：XX项*
```

### 文件命名

`周报_YYYY年MM月DD日-MM月DD日.md`
